<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Projeler</title>
    <link rel="icon" type="img/png" href="images/KMR_Logo2.png">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
</head>
<body>
    
        <div id="main-wrapper">
        
        <div class="top-bar">
            <div class="container flex-between">
                <div class="flags">
                    <a href="#"><img src="https://flagcdn.com/w20/tr.png" alt="TR"></a>
                    <a href="#"><img src="https://flagcdn.com/w20/gb.png" alt="EN"></a>
                </div>

                <div class="contact-info">
                    <a href="tel:02128792236"><i class="fas fa-phone"></i> 0212 879 22 36</a>
                    <a href="mailto:info@kmrmühendislik.com"><i class="fas fa-envelope"></i> info@kmrmühendislik.com</a>
                </div>
            </div>
        </div>

        <header class="header-section">
            <div class="container flex-between header-border">
                <div class="logo">
                    <a href="index.html" style="text-decoration: none;">
                        <img src="images/KMR_Logo.png" alt="KMR Logo">
                    </a>

                </div>
                <nav class="nav-menu">
                    <ul>
                        <li><a href="Hakkımızda.html">HAKKIMIZDA</a></li>
                        <li><a href="Hizmetler.html">HİZMETLER</a></li>
                        <li><a href="Projeler.html" style="color: #353A97;">PROJELER</a></li>
                        <li><a href="İletişim.html">İLETİŞİM</a></li>
                    </ul>
                </nav>
            </div>
        </header>

        <div class="section-divider3 container"></div>

        <div class="section-header">
            <h2>PROJELERİMİZ</h2>
            <div class="title-underline-Ana-Sayfa-Why-Us"></div>
        <div id="proje-listesi-alani" class="project-grid-container">
    </div>
    </div>
        
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const listeAlani = document.getElementById('proje-listesi-alani');
        let kartlarHtml = "";

        // jsCode.js içindeki "projeler" objesini döngüye alıyoruz
        for (let id in projeler) {
            const p = projeler[id];
            
            // 100 Karakter kısıtlaması burada yapılıyor
            const kisaMetin = p.aciklama.length > 100 
                ? p.aciklama.substring(0, 100) + "..." 
                : p.aciklama;

            kartlarHtml += `
                <div class="project-card">
                    <div class="project-image">
                        <a href="ProjeDetay.html?id=${id}">
                            <img src="${p.resim}" alt="${p.baslik}">
                        </a>
                    </div>
                    <div class="project-content">
                        <h3>${p.baslik}</h3>
                        <p>${kisaMetin}</p>
                    </div>
                </div>`;
        }
        listeAlani.innerHTML = kartlarHtml;
    });
</script>

<footer class="main-footer">
    <div class="container footer-grid">
        <div class="footer-col about">
            <img class="logo-img-footer" src="images/KMR_Logo.png" alt="KMR Logo">
            <p>Yılların verdiği tecrübe ve güvenle, hayallerinizdeki yaşam alanlarını inşa ediyoruz. Kalite ve estetiği modern mimariyle buluşturuyoruz.</p>
        </div>

        <div class="footer-col links">
            <h4>Hızlı Menü</h4>
            <ul>
                <li><a href="index.html">Ana Sayfa</a></li>
                <li><a href="Hakkımızda.html">Hakkımızda</a></li>
                <li><a href="Hizmetler.html">Hizmetler</a></li>
                <li><a href="İletişim.html">İletişim</a></li>
            </ul>
        </div>

        <div class="footer-col links">
            <h4>Hizmetlerimiz</h4>
            <ul>
                <li><a href="#">Mimari Tasarım</a></li>
                <li><a href="#">İnşaat Danışmanı</a></li>
                <li><a href="#">Genel Müteahhitlik</a></li>
                <li><a href="#">Proje Bitirme</a></li>
                <li><a href="#">İmar Hizmetleri</a></li>
                <li><a href="#">Restorasyon Hizmetleri</a></li>
            </ul>
        </div>

        <div class="footer-col links">
            <h4>Projelerimiz</h4>
            <ul>
                <li><a href="#">Akyarlar Villa Projesi</a></li>
                <li><a href="#">Duyu Göktürk</a></li>
                <li><a href="#">İmperium No2</a></li>
                <li><a href="#">Mostar Concept</a></li>
                <li><a href="#">Hayat Flora</a></li>
            </ul>
        </div>

        <div class="footer-col contact">
            <h4>İletişim</h4>
            <p style="margin-bottom: 5px;"><i class="fas fa-envelope"></i> info@kmrmühendislik.com</p>
            <p style="margin-bottom: 5px;"><i class="fas fa-phone"></i> 0212 879 22 36</p>
            <p style="margin-bottom: 5px;"><i class="fas fa-map-marker-alt"></i> ALİRIZA KUZUCAN SİTESİ, BAŞAKŞEHİR MAHALLESİ SEYRANTEPE CADDESİ, A1 Blok NO: 4G, 34480 Başakşehir/İstanbul</p>
            <div class="social-icons">
                <a href="#"><i class="fab fa-facebook-f"></i></a>
                <a href="#"><i class="fab fa-instagram"></i></a>
                <a href="#"><i class="fab fa-whatsapp"></i></a>
            </div>
        </div>
    </div>

    <div class="footer-bottom">
        <p>&copy; 2024 KMR Mühendislik. Tüm Hakları Saklıdır.</p>
    </div>
</footer>

<script>
    // 1. ADIM: Sadece bir projeye tıklandığında konumu kaydet
    document.addEventListener('click', function(e) {
        // Eğer tıklanan eleman bir proje kartı veya linki ise
        if (e.target.closest('.project-card') || e.target.closest('a')) {
            sessionStorage.setItem('projectsScrollPos', window.scrollY);
            sessionStorage.setItem('fromProjects', 'true'); // Projelerden gidildiğini işaretle
        }
    });

    // 2. ADIM: Sayfa yüklendiğinde kontrol et
    window.addEventListener('load', function() {
        const scrollPos = sessionStorage.getItem('projectsScrollPos');
        const fromProjects = sessionStorage.getItem('fromProjects');

        // Sadece 'projectsScrollPos' varsa VE biz şu an Projeler sayfasındaysak konumu uygula
        // (Bu kod Proje Detay sayfasında çalışmayacağı için orayı etkilemez)
        if (scrollPos && window.location.pathname.includes('Projeler.html')) {
            // Tarayıcının sayfayı render etmesi için çok kısa bir bekleme
            setTimeout(function() {
                window.scrollTo({
                    top: parseInt(scrollPos),
                    behavior: 'auto'
                });
                // Konumu uyguladıktan sonra işareti temizle ki normal yenilemelerde en üste gitsin
                sessionStorage.removeItem('fromProjects');
            }, 100);
        }
    });
</script>

<script src="JsCode.js"></script>
</body>
</html>